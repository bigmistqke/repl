import{c as Ye,a as E,u as Ee,m as H,s as Te,b as P,d as Ce,e as Ge,f as Fe,g as x,o as Ne,h as ee,i as w,j as Qe,k as Ze,l as et,n as tt,p as nt,S as V,I as rt,q as it}from"./index-05398e37.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const ot=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],st=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...ot]),ct=new Set(["innerHTML","textContent","innerText","children"]),at=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),lt=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function ft(e,t){const n=lt[e];return typeof n=="object"?n[t]?n.$:void 0:n}const ut=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),dt={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function ht(e,t,n){let r=n.length,i=t.length,o=r,c=0,s=0,a=t[i-1].nextSibling,u=null;for(;c<i||s<o;){if(t[c]===n[s]){c++,s++;continue}for(;t[i-1]===n[o-1];)i--,o--;if(i===c){const h=o<r?s?n[s-1].nextSibling:n[o-s]:a;for(;s<o;)e.insertBefore(n[s++],h)}else if(o===s)for(;c<i;)(!u||!u.has(t[c]))&&t[c].remove(),c++;else if(t[c]===n[o-1]&&n[s]===t[i-1]){const h=t[--i].nextSibling;e.insertBefore(n[s++],t[c++].nextSibling),e.insertBefore(n[--o],h),t[i]=n[o]}else{if(!u){u=new Map;let y=s;for(;y<o;)u.set(n[y],y++)}const h=u.get(t[c]);if(h!=null)if(s<h&&h<o){let y=c,g=1,m;for(;++y<i&&y<o&&!((m=u.get(t[y]))==null||m!==h+g);)g++;if(g>h-s){const $=t[c];for(;s<h;)e.insertBefore(n[s++],$)}else e.replaceChild(n[s++],t[c++])}else c++;else t[c++].remove()}}}const ye="_$DX_DELEGATE";function gt(e,t,n,r={}){let i;return Ye(o=>{i=o,t===document?e():R(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{i(),t.textContent=""}}function q(e,t,n){let r;const i=()=>{const c=document.createElement("template");return c.innerHTML=e,n?c.content.firstChild.firstChild:c.content.firstChild},o=t?()=>Ee(()=>document.importNode(r||(r=i()),!0)):()=>(r||(r=i())).cloneNode(!0);return o.cloneNode=o,o}function Le(e,t=window.document){const n=t[ye]||(t[ye]=new Set);for(let r=0,i=e.length;r<i;r++){const o=e[r];n.has(o)||(n.add(o),t.addEventListener(o,St))}}function J(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function yt(e,t,n,r){r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r)}function mt(e,t,n){n?e.setAttribute(t,""):e.removeAttribute(t)}function pt(e,t){t==null?e.removeAttribute("class"):e.className=t}function wt(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const i=n[0];e.addEventListener(t,n[0]=o=>i.call(e,n[1],o))}else e.addEventListener(t,n,typeof n!="function"&&n)}function bt(e,t,n={}){const r=Object.keys(t||{}),i=Object.keys(n);let o,c;for(o=0,c=i.length;o<c;o++){const s=i[o];!s||s==="undefined"||t[s]||(me(e,s,!1),delete n[s])}for(o=0,c=r.length;o<c;o++){const s=r[o],a=!!t[s];!s||s==="undefined"||n[s]===a||!a||(me(e,s,!0),n[s]=a)}return n}function vt(e,t,n){if(!t)return n?J(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let i,o;for(o in n)t[o]==null&&r.removeProperty(o),delete n[o];for(o in t)i=t[o],i!==n[o]&&(r.setProperty(o,i),n[o]=i);return n}function Pt(e,t={},n,r){const i={};return r||E(()=>i.children=B(e,t.children,i.children)),E(()=>typeof t.ref=="function"&&oe(t.ref,e)),E(()=>xt(e,t,n,!0,i,!0)),i}function oe(e,t,n){return Ee(()=>e(t,n))}function R(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return B(e,t,r,n);E(i=>B(e,t(),i,n),r)}function xt(e,t,n,r,i={},o=!1){t||(t={});for(const c in i)if(!(c in t)){if(c==="children")continue;i[c]=pe(e,c,null,i[c],n,o,t)}for(const c in t){if(c==="children"){r||B(e,t.children);continue}const s=t[c];i[c]=pe(e,c,s,i[c],n,o,t)}}function Ot(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function me(e,t,n){const r=t.trim().split(/\s+/);for(let i=0,o=r.length;i<o;i++)e.classList.toggle(r[i],n)}function pe(e,t,n,r,i,o,c){let s,a,u,h,y;if(t==="style")return vt(e,n,r);if(t==="classList")return bt(e,n,r);if(n===r)return r;if(t==="ref")o||n(e);else if(t.slice(0,3)==="on:"){const g=t.slice(3);r&&e.removeEventListener(g,r,typeof r!="function"&&r),n&&e.addEventListener(g,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const g=t.slice(10);r&&e.removeEventListener(g,r,!0),n&&e.addEventListener(g,n,!0)}else if(t.slice(0,2)==="on"){const g=t.slice(2).toLowerCase(),m=ut.has(g);if(!m&&r){const $=Array.isArray(r)?r[0]:r;e.removeEventListener(g,$)}(m||n)&&(wt(e,g,n,m),m&&Le([g]))}else if(t.slice(0,5)==="attr:")J(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")mt(e,t.slice(5),n);else if((y=t.slice(0,5)==="prop:")||(u=ct.has(t))||!i&&((h=ft(t,e.tagName))||(a=st.has(t)))||(s=e.nodeName.includes("-")||"is"in c))y&&(t=t.slice(5),a=!0),t==="class"||t==="className"?pt(e,n):s&&!a&&!u?e[Ot(t)]=n:e[h||t]=n;else{const g=i&&t.indexOf(":")>-1&&dt[t.split(":")[0]];g?yt(e,g,t,n):J(e,at[t]||t,n)}return n}function St(e){let t=e.target;const n=`$$${e.type}`,r=e.target,i=e.currentTarget,o=a=>Object.defineProperty(e,"target",{configurable:!0,value:a}),c=()=>{const a=t[n];if(a&&!t.disabled){const u=t[`${n}Data`];if(u!==void 0?a.call(t,u,e):a.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&o(t.host),!0},s=()=>{for(;c()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const a=e.composedPath();o(a[0]);for(let u=0;u<a.length-2&&(t=a[u],!!c());u++){if(t._$host){t=t._$host,s();break}if(t.parentNode===i)break}}else s();o(r)}function B(e,t,n,r,i){for(;typeof n=="function";)n=n();if(t===n)return n;const o=typeof t,c=r!==void 0;if(e=c&&n[0]&&n[0].parentNode||e,o==="string"||o==="number"){if(o==="number"&&(t=t.toString(),t===n))return n;if(c){let s=n[0];s&&s.nodeType===3?s.data!==t&&(s.data=t):s=document.createTextNode(t),n=D(e,n,r,s)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||o==="boolean")n=D(e,n,r);else{if(o==="function")return E(()=>{let s=t();for(;typeof s=="function";)s=s();n=B(e,s,n,r)}),()=>n;if(Array.isArray(t)){const s=[],a=n&&Array.isArray(n);if(te(s,t,n,i))return E(()=>n=B(e,s,n,r,!0)),()=>n;if(s.length===0){if(n=D(e,n,r),c)return n}else a?n.length===0?we(e,s,r):ht(e,n,s):(n&&D(e),we(e,s));n=s}else if(t.nodeType){if(Array.isArray(n)){if(c)return n=D(e,n,r,t);D(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function te(e,t,n,r){let i=!1;for(let o=0,c=t.length;o<c;o++){let s=t[o],a=n&&n[e.length],u;if(!(s==null||s===!0||s===!1))if((u=typeof s)=="object"&&s.nodeType)e.push(s);else if(Array.isArray(s))i=te(e,s,a)||i;else if(u==="function")if(r){for(;typeof s=="function";)s=s();i=te(e,Array.isArray(s)?s:[s],Array.isArray(a)?a:[a])||i}else e.push(s),i=!0;else{const h=String(s);a&&a.nodeType===3&&a.data===h?e.push(a):e.push(document.createTextNode(h))}}return i}function we(e,t,n=null){for(let r=0,i=t.length;r<i;r++)e.insertBefore(t[r],n)}function D(e,t,n,r){if(n===void 0)return e.textContent="";const i=r||document.createTextNode("");if(t.length){let o=!1;for(let c=t.length-1;c>=0;c--){const s=t[c];if(i!==s){const a=s.parentNode===e;!o&&!c?a?e.replaceChild(i,s):e.insertBefore(i,n):a&&s.remove()}else o=!0}}else e.insertBefore(i,n);return[i]}var $t=q("<span>"),jt=(e,t)=>new Promise(n=>{const r={x:e.clientX,y:e.clientY};let i=r;const o=performance.now();function c(a){const u={x:a.clientX,y:a.clientY},h={x:u.x-i.x,y:u.y-i.y},y={x:r.x-u.x,y:r.y-u.y};i=u;const g={total:y,delta:h,event:a,timespan:performance.now()-o};return t(g),g}const s=a=>{window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",s),n(c(a))};window.addEventListener("mousemove",c),window.addEventListener("mouseup",s)});function Ie(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):"ref"in n&&n.ref&&(typeof n.ref=="function"?n.ref(t):n.ref=t)})}}function At(e,t,n){let r;return t.Provider({value:n,children:()=>(r=e(),"")}),()=>r}var se=new WeakMap,Me=new WeakSet,ne=Symbol("no-overflow"),Et=e=>e.endsWith("%"),Tt=e=>e.endsWith("fr"),Ct=e=>e.endsWith("px"),K=e=>Ct(e.size),A=e=>Tt(e.size),v=e=>se.get(e),re=e=>!Me.has(e);function ie(e){if(typeof e=="function"){const t=e();return ie(t)}return e}function Ft(e,t){const n=e.indexOf(t);if(n===-1||n===0||n===e.length-1)return;const r=e.slice(0,n).findLast(re),i=e.slice(n).find(re);if(!(!r||!i))return[r,i]}function ce(e){const t=ae(),n=H({size:"1fr"},e),[,r]=Te(e,["size","min","max","style","ref"]);let i;const o=(()=>{var c=$t(),s=Ie(e,a=>i=a);return typeof s=="function"&&oe(s,c),Pt(c,H({get style(){return{overflow:"hidden",...e.style}}},r,{get"data-active-pane"(){return t?.isActivePane(i)||void 0}}),!1,!0),R(c,()=>e.children),c})();return se.set(o,n),o}var ze=et();function ae(){return Qe(ze)}function I(e){const t=H({type:"column"},e),[,n]=Te(e,["type","style","ref"]),[r,i]=P(),[o,c]=P(void 0),[s,a]=P(new WeakMap,{equals:!1}),[u,h]=P(),y=()=>(t.type==="column"?r()?.width:r()?.height)||0;function g(l,f){a(d=>(d.set(l,(d.get(l)||0)-f),d))}function m(l,f=0){return Et(l)?(parseFloat(l)-f)/100*y():parseFloat(l)-f}function $(l){const f=v(l),d=k(l);return!f||A(f)?0:m(f.size,d)}function T(){const l=We(),f=de().reduce((d,p)=>d+parseFloat(v(p).size),0);if(f===0)return 0;if(f<1){const d=l-l*f;return l/(f+d/l)}else return l/f}function _e(l){const f=v(l),d=k(l);return!f||!A(f)?0:(parseFloat(f.size)-d)*T()}function k(l){return s().get(l)||0}function qe(){return Xe().reduce((l,f)=>l+$(f),0)}function We(){return y()-qe()}function le(l,f,d){const p=de(),j=p.indexOf(l),b=p.map(_e);let O=K(v(f))?d:d/y()*100;g(f,O),(b[j]-=d)<0&&(g(f,-O),b[j]=0);const F=b.reduce((S,L)=>S+L,0),N=p.map(v).reduce((S,L)=>S+parseFloat(L.size),0),Je=b.map(S=>S*N/F).map((S,L)=>parseFloat(v(p[L]).size)-S);a(S=>(Je.forEach((L,ge)=>{S.set(p[ge],L)}),S))}function fe(l,f){const d=v(l),p=k(l);if(!A(d))return 0;const j=parseFloat(d.size)-p+f;return j<0?j:0}function ue(l,f){const d=v(l),p=k(l);if(A(d))return 0;const b=m(d.size,p)+f;if(d.max){const O=m(d.max);if(b<O)return b-O}if(d.min){const O=m(d.min);if(b>O)return b-O}return b>0?0:b}const Ve={isActivePane:Ce(o,(l,f)=>re(l)&&!!f?.includes(l)),get type(){return t.type},dragHandleStart(l){return c(Ft(M(),l))},dragHandle([l,f],d){if(d===0)return ne;const p=v(l),j=v(f),b=A(p),O=A(j);let z=d/T();const F=b?fe(l,z)*T():ue(l,d),N=O?fe(f,-z)*T():ue(f,-d);return d=F?d-F:N?d+N:d,z=d/T(),b&&O?(g(l,z),g(f,-z)):!b&&!O?(g(l,K(p)?d:d/y()*100),g(f,K(j)?-d:-d/y()*100)):b?le(l,f,-d):le(f,l,d),!F&&!N?ne:Math.abs(F)>Math.abs(N)?F:-N},dragHandleEnd(){c(void 0)}},Ke=Ge(At(()=>e.children,ze,Ve)),M=Fe(()=>Ke.toArray().filter(l=>se.has(l))),de=()=>M().filter(l=>A(v(l))),Xe=()=>M().filter(l=>!A(v(l))),he=()=>M().map(l=>{const f=v(l),d=k(l);if(A(f))return d?`${parseFloat(f.size)-d}fr`:f.size;const p=d?`calc(${parseFloat(f.size)-d}${K(f)?"px":"%"})`:f.size;return f.min?f.max?`min(${f.min}, max(${f.max}, ${p}))`:`min(${f.min}, ${p})`:f.max?`max(${f.max}, ${p})`:p}).join(" ");return x(()=>{const l=u();if(!l)return;const f=new ResizeObserver(d=>{for(let p of d)i(p.contentRect),e.onResize?.(p.contentRect,l)});f.observe(l),Ne(()=>f.disconnect())}),P(ee(M,l=>{x(Ze(()=>v(l)?.size,()=>{a(f=>(f.set(l,0),f))}))})),x(()=>e.onTemplate?.(he())),w(ce,H({ref(l){var f=Ie(h,e);typeof f=="function"&&f(l)},get style(){return{display:"grid",...e.style,[`grid-template-${t.type}s`]:he()}}},n,{get children(){return M()}}))}function Nt(e){if(!ae())throw"Split.Pane should be used within a Split-component";return w(ce,e)}function Lt(e){const t=ae();if(!t)throw"Split.Handle should be used within a Split-component";const[n,r]=P(!1),i=w(ce,H(e,{get"data-active-handle"(){return n()||void 0},onPointerDown:async o=>{let c={x:0,y:0};r(!0);const s=t.dragHandleStart(ie(i));s&&(await jt(o,({delta:a})=>{const u=t.dragHandle(s,t.type==="column"?a.x+c.x:a.y+c.y);u===ne?c={x:0,y:0}:(c.x+=t.type==="column"?a.x:u,c.y+=t.type!=="column"?a.y:u)}),t.dragHandleEnd(),r(!1))}}));return Me.add(ie(i)),i}I.Handle=Lt;I.Pane=Nt;function It(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?be(Object(n),!0).forEach(function(r){It(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mt(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function zt(e,t){if(e==null)return{};var n=Mt(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Dt(e,t){return Rt(e)||Ht(e,t)||Bt(e,t)||kt()}function Rt(e){if(Array.isArray(e))return e}function Ht(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,i=!1,o=void 0;try{for(var c=e[Symbol.iterator](),s;!(r=(s=c.next()).done)&&(n.push(s.value),!(t&&n.length===t));r=!0);}catch(a){i=!0,o=a}finally{try{!r&&c.return!=null&&c.return()}finally{if(i)throw o}}return n}}function Bt(e,t){if(e){if(typeof e=="string")return Pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pe(e,t)}}function Pe(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function kt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ut(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xe(Object(n),!0).forEach(function(r){Ut(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return t.reduceRight(function(i,o){return o(i)},r)}}function U(e){return function t(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.length>=e.length?e.apply(this,i):function(){for(var c=arguments.length,s=new Array(c),a=0;a<c;a++)s[a]=arguments[a];return t.apply(n,[].concat(i,s))}}}function Y(e){return{}.toString.call(e).includes("Object")}function qt(e){return!Object.keys(e).length}function _(e){return typeof e=="function"}function Wt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Vt(e,t){return Y(t)||C("changeType"),Object.keys(t).some(function(n){return!Wt(e,n)})&&C("changeField"),t}function Kt(e){_(e)||C("selectorType")}function Xt(e){_(e)||Y(e)||C("handlerType"),Y(e)&&Object.values(e).some(function(t){return!_(t)})&&C("handlersType")}function Jt(e){e||C("initialIsRequired"),Y(e)||C("initialType"),qt(e)&&C("initialContent")}function Yt(e,t){throw new Error(e[t]||e.default)}var Gt={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},C=U(Yt)(Gt),X={changes:Vt,selector:Kt,handler:Xt,initial:Jt};function Qt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};X.initial(e),X.handler(t);var n={current:e},r=U(tn)(n,t),i=U(en)(n),o=U(X.changes)(e),c=U(Zt)(n);function s(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(h){return h};return X.selector(u),u(n.current)}function a(u){_t(r,i,o,c)(u)}return[s,a]}function Zt(e,t){return _(t)?t(e.current):t}function en(e,t){return e.current=Oe(Oe({},e.current),t),t}function tn(e,t,n){return _(t)?t(e.current):Object.keys(n).forEach(function(r){var i;return(i=t[r])===null||i===void 0?void 0:i.call(t,e.current[r])}),n}var nn={create:Qt},rn={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function on(e){return function t(){for(var n=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return i.length>=e.length?e.apply(this,i):function(){for(var c=arguments.length,s=new Array(c),a=0;a<c;a++)s[a]=arguments[a];return t.apply(n,[].concat(i,s))}}}function sn(e){return{}.toString.call(e).includes("Object")}function cn(e){return e||Se("configIsRequired"),sn(e)||Se("configType"),e.urls?(an(),{paths:{vs:e.urls.monacoBase}}):e}function an(){console.warn(De.deprecation)}function ln(e,t){throw new Error(e[t]||e.default)}var De={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Se=on(ln)(De),fn={config:cn},un=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(i){return n.reduceRight(function(o,c){return c(o)},i)}};function Re(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],Re(e[n],t[n]))}),ve(ve({},e),t)}var dn={type:"cancelation",msg:"operation is manually canceled"};function Q(e){var t=!1,n=new Promise(function(r,i){e.then(function(o){return t?i(dn):r(o)}),e.catch(i)});return n.cancel=function(){return t=!0},n}var hn=nn.create({config:rn,isInitialized:!1,resolve:null,reject:null,monaco:null}),He=Dt(hn,2),W=He[0],G=He[1];function gn(e){var t=fn.config(e),n=t.monaco,r=zt(t,["monaco"]);G(function(i){return{config:Re(i.config,r),monaco:n}})}function yn(){var e=W(function(t){var n=t.monaco,r=t.isInitialized,i=t.resolve;return{monaco:n,isInitialized:r,resolve:i}});if(!e.isInitialized){if(G({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),Q(Z);if(window.monaco&&window.monaco.editor)return Be(window.monaco),e.resolve(window.monaco),Q(Z);un(mn,wn)(bn)}return Q(Z)}function mn(e){return document.body.appendChild(e)}function pn(e){var t=document.createElement("script");return e&&(t.src=e),t}function wn(e){var t=W(function(r){var i=r.config,o=r.reject;return{config:i,reject:o}}),n=pn("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function bn(){var e=W(function(n){var r=n.config,i=n.resolve,o=n.reject;return{config:r,resolve:i,reject:o}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){Be(n),e.resolve(n)},function(n){e.reject(n)})}function Be(e){W().monaco||G({monaco:e})}function vn(){return W(function(e){var t=e.monaco;return t})}var Z=new Promise(function(e,t){return G({resolve:e,reject:t})}),Pn={config:gn,init:yn,__getMonacoInstance:vn};const xn=`.repl {
  display: grid;
  grid-template-rows: auto 1fr 1fr;
  gap: 5px;
  height: 100%;
}

iframe {
  border: 1px solid black;
  width: 100%;
  height: 100%;
}
`,On=`<script src="./main.ts" type="module"><\/script>
<link href="./index.css" rel="stylesheet"></link>
<div id="root"></div>
`,Sn=`import {
  createFileSystem,
  isUrl,
  parseHtml,
  resolvePath,
  Transform,
  transformModulePaths,
} from '@bigmistqke/repl'
import { createSignal } from 'solid-js'
import html from 'solid-js/html'
import { render } from 'solid-js/web'
import ts from 'typescript'

function createRepl() {
  const transformJs: Transform = ({ path, source, executables }) => {
    return transformModulePaths(source, modulePath => {
      if (modulePath.startsWith('.')) {
        // Swap relative module-path out with their respective module-url
        const url = executables.get(resolvePath(path, modulePath))
        if (!url) throw 'url is undefined'
        return url
      } else if (isUrl(modulePath)) {
        // Return url directly
        return modulePath
      } else {
        // Wrap external modules with esm.sh
        return \`https://esm.sh/\${modulePath}\`
      }
    })!
  }

  return createFileSystem({
    css: { type: 'css' },
    js: {
      type: 'javascript',
      transform: transformJs,
    },
    ts: {
      type: 'javascript',
      transform({ path, source, fs }) {
        return transformJs({ path, source: ts.transpile(source), fs })
      },
    },
    html: {
      type: 'html',
      transform(config) {
        return (
          parseHtml(config)
            // Transform content of all \`<script type="module" />\` elements
            .transformModuleScriptContent(transformJs)
            // Bind relative \`src\`-attribute of all \`<script />\` elements
            .bindScriptSrc()
            // Bind relative \`href\`-attribute of all \`<link />\` elements
            .bindLinkHref()
            .toString()
        )
      },
    },
  })
}

render(() => {
  const [selectedPath, setSelectedPath] = createSignal<string>('index.html')

  const repl = createRepl()

  repl.writeFile(
    'index.html',
    \`<head>
  <script src="./main.ts"><\/script>
<link rel="stylesheet" href="./index.css"></link>
</head>
<body>
hallo world 👋
</body>\`,
  )

  repl.writeFile('index.css', \`body { font-size: 32pt; }\`)

  repl.writeFile(
    'main.ts',
    \`function randomValue(){
  return 200 + Math.random() * 50
}
    
function randomColor(){
  document.body.style.background = \\\`rgb(\\\${randomValue()}, \\\${randomValue()}, \\\${randomValue()})\\\`
}    

requestAnimationFrame(randomColor)
setInterval(randomColor, 2000)\`,
  )

  const Button = (props: { path: string }) =>
    html\`<button onclick="\${() => setSelectedPath(props.path)}">\${props.path}</button>\`

  return html\`<div class="repl">
    <div style="display: flex; align-content: start; gap: 5px;">
      <\${Button} path="index.html" />
      <\${Button} path="index.css" />
      <\${Button} path="main.ts" />
    </div>
    <textarea
      oninput=\${e => repl.writeFile(selectedPath(), e.target.value)}
      value=\${() => repl.readFile(selectedPath())}
    ></textarea>
    <iframe src=\${() => repl.executables.get('index.html')}></iframe>
  </div> \`
}, document.getElementById('root')!)
`,$n={"index.css":xn,"index.html":On,"main.ts":Sn};function jn(){const e=new Worker("./assets/fs.worker.worker-proxy.js",{type:"module"});return tt(e)}function An(e,t,n){const r=typeof e=="function"?e():e;return r?t(r):n?n():void 0}function ke(e,t,n){return()=>An(e,t,n)}function $e(...e){function t(){const n=new Array(e.length);for(let r=0;r<e.length;r++){const i=typeof e[r]=="function"?e[r]():e[r];if(!i)return;n[r]=i}return n}return t}function En(e,t){x(ke(e,t))}function Tn(e,t){return Fe(ke(e,t))}var Cn=q("<iframe>"),Ue=q("<div>"),je=q("<button>"),Fn=q("<div><span>");gt(()=>{const[e,t]=P("main.ts"),n=Ce(e),[r,i]=P(),[o,c]=P({}),[s,a]=P(),u=new jn;return u.watchTsconfig(c),u.watchTypes(a),u.watchExecutable("index.html",i),Object.entries($n).forEach(([h,y])=>u.writeFile(h,y)),w(I,{style:{height:"100vh"},get children(){return[w(I.Pane,{size:"150px",style:{display:"grid","align-content":"start"},get children(){return w(Ln,{fs:u,onPathSelect:t,isPathSelected:n})}}),w(Ae,{}),w(I.Pane,{style:{display:"grid"},get children(){return w(Nn,{fs:u,get path(){return e()},get types(){return s()},get tsconfig(){return o()}})}}),w(Ae,{}),w(I.Pane,{style:{display:"grid"},get children(){var h=Cn();return h.style.setProperty("height","100%"),h.style.setProperty("width","100%"),h.style.setProperty("border","none"),E(()=>J(h,"src",r())),h}})]}})},document.getElementById("root"));function Ae(){return w(I.Handle,{size:"10px",style:{display:"flex",padding:"0px 4px",cursor:"ew-resize"},get children(){var e=Ue();return e.style.setProperty("background","black"),e.style.setProperty("flex","1"),e}})}function Nn(e){const[t,n]=P([]),[r]=nt(()=>Pn.init()),[i,o]=P(),c=Tn($e(r,i),([s,a])=>s.editor.create(a,{value:"",language:"typescript",automaticLayout:!0}));return x(()=>e.fs.watchPaths(n)),En($e(r,c),([s,a])=>{const u=H({tsx:"typescript",ts:"typescript"},()=>e.languages);async function h(y){let g=await e.fs.$async.getType(y);const m=it(y);return m&&m in u&&(g=u[m]),g}x(()=>{a.onDidChangeModelContent(y=>{e.fs.writeFile(e.path,a.getModel().getValue())})}),x(ee(t,y=>{x(async()=>{const g=await h(y);if(g==="dir")return;const m=s.Uri.parse(`file:///${y}`),$=s.editor.getModel(m)||s.editor.createModel("",g,m);e.fs.watchFile(y,T=>{T!==$.getValue()&&$.setValue(T||"")}),Ne(()=>$.dispose())})})),x(async()=>{const y=s.Uri.parse(`file:///${e.path}`);let g=await h(e.path);const m=s.editor.getModel(y)||s.editor.createModel("",g,y);a.setModel(m)}),x(()=>{e.tsconfig&&(s.languages.typescript.typescriptDefaults.setCompilerOptions(e.tsconfig),s.languages.typescript.javascriptDefaults.setCompilerOptions(e.tsconfig))}),x(ee(()=>Object.keys(e.types??{}),y=>{x(()=>{const g=e.types?.[y];if(!g)return;const m=`file:///${y}`;s.languages.typescript.typescriptDefaults.addExtraLib(g,m),s.languages.typescript.javascriptDefaults.addExtraLib(g,m)})}))}),(()=>{var s=Ue();return oe(o,s),s.style.setProperty("overflow","hidden"),s})()}function Ln(e){function t(r){const[i,o]=P(!1),[c,s]=P([]);return x(()=>e.fs.watchDir(r.path,s)),[w(V,{get when(){return r.path},get children(){var a=Fn(),u=a.firstChild;return a.style.setProperty("display","grid"),a.style.setProperty("grid-template-columns","1fr 30px"),R(u,()=>r.name),R(a,w(V,{get when(){return c().length!==0},get children(){var h=je();return h.$$click=()=>o(y=>!y),h.style.setProperty("text-align","center"),R(h,()=>i()?"+":"-"),h}}),null),E(h=>(h=r.layer*10+"px")!=null?a.style.setProperty("padding-left",h):a.style.removeProperty("padding-left")),a}}),w(V,{get when(){return!i()},get children(){return w(rt,{get each(){return c()},children:a=>w(n,{get layer(){return r.layer+1},get path(){return a().path},get type(){return a().type}})})}})]}function n(r){const i=()=>{const o=r.path.split("/");return o[o.length-1]||""};return w(V,{get when(){return r.type==="dir"},get fallback(){return(()=>{var o=je();return o.$$click=()=>e.onPathSelect(r.path),R(o,i),E(c=>{var s=r.layer*10+"px",a=e.isPathSelected(r.path)?"underline":"none";return s!==c.e&&((c.e=s)!=null?o.style.setProperty("padding-left",s):o.style.removeProperty("padding-left")),a!==c.t&&((c.t=a)!=null?o.style.setProperty("text-decoration",a):o.style.removeProperty("text-decoration")),c},{e:void 0,t:void 0}),o})()},get children(){return w(t,{get layer(){return r.layer},get path(){return r.path},get name(){return i()}})}})}return w(n,{path:"",layer:0,type:"dir"})}Le(["click"]);
